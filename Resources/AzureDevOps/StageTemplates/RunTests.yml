parameters:
  AzureSubscription: ''
  CodeCoveragePercentage: 80

stages:
- stage: Test
  jobs:
    - template: ../JobTemplates/RunIndividualTest.yml
      parameters:
        AzureSubscription: '${{ parameters.AzureSubscription }}'
        TestName: 'RunAcceptanceTests'
        TestType: 'ArmAcceptance'
        ResultsFileSuffix: 'Acceptance'

    - template: ../JobTemplates/RunIndividualTest.yml
      parameters:
        TestName: 'RunQualityTests'
        TestType: 'Quality'
        ResultsFileSuffix: 'Quality'

    - template: ../JobTemplates/RunIndividualTest.yml
      parameters:
        AzureSubscription: '${{ parameters.AzureSubscription }}'
        TestName: 'RunPowershell5UnitTests'
        TestType: 'Unit'
        ResultsFileSuffix: 'powershell'
        CodeCoveragePercentage: ${{ parameters.CodeCoveragePercentage }}

    - template: ../JobTemplates/RunIndividualTest.yml
      parameters:
        TestName: 'RunPowershellCoreUnitTests'
        TestType: 'Unit'
        ResultsFileSuffix: 'pwsh'
        CodeCoveragePercentage: ${{ parameters.CoreCodeCoveragePercentage }}